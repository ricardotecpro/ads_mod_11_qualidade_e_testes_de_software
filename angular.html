<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutorial: Construindo o Frontend com Angular</title>
    <style>
        /* --- Estilos Gerais --- */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            line-height: 1.6;
            background-color: #f4f7f9;
            color: #333;
            margin: 0;
            padding: 0;
        }

        /* --- Container Principal --- */
        .container {
            max-width: 900px;
            margin: 2rem auto;
            background-color: #ffffff;
            padding: 2rem 3rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        /* --- Tipografia --- */
        h1, h2, h3 {
            color: #1a253c;
            font-weight: 700;
            line-height: 1.2;
        }

        h1 {
            font-size: 2.5rem;
            text-align: center;
            border-bottom: 3px solid #007bff;
            padding-bottom: 0.5rem;
            margin-bottom: 2rem;
        }

        h2 {
            font-size: 2rem;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 0.5rem;
            margin-top: 3rem;
            margin-bottom: 1.5rem;
        }

        h3 {
            font-size: 1.5rem;
            color: #34495e;
            margin-top: 2rem;
        }

        p {
            margin-bottom: 1rem;
        }

        a {
            color: #007bff;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        strong {
            color: #1a253c;
        }

        /* --- Blocos de Código --- */
        pre {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 1.5em;
            border-radius: 6px;
            overflow-x: auto;
            font-size: 0.9em;
        }

        code {
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
        }

        /* Código inline */
        p code, li code {
            background-color: #e9ecef;
            color: #c7254e;
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-size: 0.9em;
        }

        /* --- Listas --- */
        ul, ol {
            padding-left: 20px;
        }

        li {
            margin-bottom: 0.5rem;
        }

        /* --- Caixas de Destaque --- */
        .note, .troubleshooting {
            padding: 1.5rem;
            margin-top: 1.5rem;
            border-left-width: 5px;
            border-left-style: solid;
            border-radius: 4px;
        }

        .note {
            background-color: #e7f3fe;
            border-color: #007bff;
        }

        .troubleshooting {
            background-color: #fff4e5;
            border-color: #ff9800;
        }

        hr {
            border: 0;
            height: 1px;
            background: #e9ecef;
            margin: 3rem 0;
        }

    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>Construindo o Frontend com Angular</h1>
        </header>

        <main>
            <p>Após a criação da nossa API, o próximo passo é desenvolver a interface web que irá interagir com ela. Utilizaremos <strong>Angular</strong> para criar uma Single Page Application (SPA) moderna e reativa.</p>

            <section>
                <h2>Etapa 1: Preparando o Ambiente e Criando o Projeto</h2>
                <p>O primeiro passo é garantir que todas as ferramentas necessárias estejam instaladas e criar a estrutura inicial do nosso projeto Angular.</p>

                <h3>1. Pré-requisitos</h3>
                <p>Abra seu terminal e verifique se o Node.js e o Angular CLI estão instalados.</p>
                <pre><code>node -v
ng version</code></pre>
                <div class="note">
                    <strong>Nota:</strong> Se você não tiver o Node.js, baixe-o no <a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">site oficial</a>. Para instalar o Angular CLI, execute o comando: <code>npm install -g @angular/cli</code>.
                </div>

                <h3>2. Criando o Projeto Angular</h3>
                <p>Navegue até o diretório onde você armazena seus projetos (fora da pasta da API) e execute o comando para criar uma nova aplicação:</p>
                <pre><code>ng new todolist-web</code></pre>
                <p>O Angular CLI fará algumas perguntas durante a configuração:</p>
                <ul>
                    <li><code>Would you like to add Angular routing?</code> (Deseja adicionar roteamento?): <strong>n</strong></li>
                    <li><code>Which stylesheet format would you like to use?</code> (Qual formato de folha de estilos?): <strong>CSS</strong></li>
                </ul>

                <h3>3. Gerando os Blocos de Construção</h3>
                <p>Com o projeto criado, vamos usar o Angular CLI para gerar os arquivos essenciais. Navegue até a pasta do projeto no terminal:</p>
                <pre><code>cd todolist-web</code></pre>
                <p>Agora, execute os seguintes comandos:</p>
                <pre><code># 1. Crie uma interface para o modelo de dados 'Tarefa'
ng generate interface models/tarefa

# 2. Crie o serviço que irá se comunicar com a API
ng generate service services/tarefa

# 3. Crie o componente visual que exibirá a lista de tarefas
ng generate component components/task-list</code></pre>
            </section>

            <hr>

            <section>
                <h2>Etapa 2: Conectando o Frontend com o Backend</h2>
                <p>Agora vamos escrever o código que faz a ponte entre o Angular e a API. A implementação varia um pouco dependendo se seu projeto usa <strong>Módulos</strong> ou <strong>Componentes Standalone</strong>.</p>

                <h3>Definindo a Interface <code>Tarefa</code> (Comum a Ambos)</h3>
                <p>Abra o arquivo <code>src/app/models/tarefa.ts</code> e defina sua estrutura:</p>
                <pre><code>// src/app/models/tarefa.ts
export interface Tarefa {
  id?: number; // O ID é opcional, pois o backend o gera na criação.
  descricao: string;
  concluida: boolean;
}</code></pre>

                <h3>Opção A: Configuração com Módulos (app.module.ts)</h3>
                <p>Para que nosso serviço possa fazer requisições HTTP e para usarmos formulários, precisamos importar os módulos <code>HttpClientModule</code> e <code>FormsModule</code>. Abra <code>src/app/app.module.ts</code> e modifique-o:</p>
                <pre><code>// src/app/app.module.ts
import { NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';
import { HttpClientModule } from '@angular/common/http'; // 1. Importe
import { FormsModule } from '@angular/forms';           // 2. Importe

import { AppComponent } from './app.component';
import { TaskListComponent } from './components/task-list/task-list.component';

@NgModule({
  declarations: [
    AppComponent,
    TaskListComponent
  ],
  imports: [
    BrowserModule,
    HttpClientModule, // 3. Adicione aos imports
    FormsModule       // 4. Adicione também
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule { }</code></pre>

                <h3>Opção B: Configuração com Componentes Standalone</h3>
                <p>A configuração de provedores globais é feita no arquivo <code>src/app/app.config.ts</code>.</p>
                <pre><code>// src/app/app.config.ts
import { ApplicationConfig } from '@angular/core';
import { provideRouter } from '@angular/router';
import { routes } from './app.routes';
import { provideHttpClient } from '@angular/common/http'; // 1. IMPORTE

export const appConfig: ApplicationConfig = {
  providers: [
    provideRouter(routes),
    provideHttpClient() // 2. ADICIONE AQUI
  ]
};</code></pre>
            </section>

            <hr>

            <section>
                <h2>Etapa 3: Implementando o Componente <code>TaskListComponent</code></h2>
                <p>Com a estrutura configurada, vamos dar vida ao nosso componente principal.</p>

                <h3>1. Lógica do Componente (<code>task-list.component.ts</code>)</h3>
                <p>Abra <code>src/app/components/task-list/task-list.component.ts</code> para injetar o serviço e criar os métodos de gerenciamento.</p>
                <pre><code>// src/app/components/task-list/task-list.component.ts
import { Component, OnInit } from '@angular/core';
import { TarefaService } from '../../services/tarefa.service';
import { Tarefa } from '../../models/tarefa';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';

@Component({
  selector: 'app-task-list',
  standalone: true,
  imports: [ CommonModule, FormsModule ],
  templateUrl: './task-list.component.html',
  styleUrl: './task-list.component.css'
})
export class TaskListComponent implements OnInit {

  tarefas: Tarefa[] = [];
  novaTarefa: Tarefa = { descricao: '', concluida: false };

  constructor(private tarefaService: TarefaService) { }

  ngOnInit(): void {
    this.carregarTarefas();
  }

  carregarTarefas(): void {
    this.tarefaService.getTarefas().subscribe(data => {
      this.tarefas = data;
    });
  }

  adicionarTarefa(): void {
    if (this.novaTarefa.descricao.trim() === '') return;
    this.tarefaService.addTarefa(this.novaTarefa).subscribe(tarefaAdicionada => {
      this.tarefas.push(tarefaAdicionada);
      this.novaTarefa = { descricao: '', concluida: false };
    });
  }

  atualizarStatus(tarefa: Tarefa): void {
    this.tarefaService.updateTarefa(tarefa).subscribe();
  }

  deletarTarefa(id: number | undefined): void {
    if (id === undefined) return;
    this.tarefaService.deleteTarefa(id).subscribe(() => {
      this.tarefas = this.tarefas.filter(t => t.id !== id);
    });
  }
}</code></pre>

                <h3>2. Aparência do Componente (<code>task-list.component.html</code>)</h3>
                <p>Abra <code>src/app/components/task-list/task-list.component.html</code> e substitua seu conteúdo pelo HTML que irá renderizar o formulário e a lista.</p>
                <pre><code>&lt;div class="container"&gt;
  &lt;h1&gt;Minha Lista de Tarefas&lt;/h1&gt;

  &lt;!-- Formulário para adicionar novas tarefas --&gt;
  &lt;form class="form-add" (ngSubmit)="adicionarTarefa()"&gt;
    &lt;input
      type="text"
      placeholder="O que precisa ser feito?"
      [(ngModel)]="novaTarefa.descricao"
      name="descricao"
      required
    &gt;
    &lt;button type="submit"&gt;Adicionar&lt;/button&gt;
  &lt;/form&gt;

  &lt;!-- Lista de tarefas --&gt;
  &lt;ul class="task-list"&gt;
    &lt;li *ngFor="let tarefa of tarefas"&gt;
      &lt;input
        type="checkbox"
        [(ngModel)]="tarefa.concluida"
        (change)="atualizarStatus(tarefa)"
      &gt;
      &lt;span [ngClass]="{'completed': tarefa.concluida}"&gt;
        {{ tarefa.descricao }}
      &lt;/span&gt;
      &lt;button class="delete-btn" (click)="deletarTarefa(tarefa.id)"&gt;×&lt;/button&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;</code></pre>

                <h3>3. Estilo do Componente (<code>task-list.component.css</code>)</h3>
                <p>Adicione este CSS em <code>src/app/components/task-list/task-list.component.css</code>.</p>
                <pre><code>.container {
  max-width: 600px;
  margin: 2rem auto;
  font-family: sans-serif;
  padding: 1rem;
}
.form-add {
  display: flex;
  margin-bottom: 1.5rem;
}
.form-add input {
  flex-grow: 1;
  padding: 0.8rem;
  border: 1px solid #ccc;
  border-radius: 4px 0 0 4px;
}
.form-add button {
  padding: 0.8rem 1.2rem;
  border: none;
  background-color: #007bff;
  color: white;
  cursor: pointer;
  border-radius: 0 4px 4px 0;
}
.task-list {
  list-style: none;
  padding: 0;
}
.task-list li {
  display: flex;
  align-items: center;
  padding: 0.8rem;
  border-bottom: 1px solid #eee;
}
.task-list li span.completed {
  text-decoration: line-through;
  color: #888;
}
.delete-btn {
  border: none;
  background: transparent;
  color: #ff4d4d;
  cursor: pointer;
  font-size: 1.2rem;
  font-weight: bold;
}</code></pre>
            </section>

            <hr>

            <section>
                <h2>Etapa 4: Rodando a Aplicação Completa!</h2>
                <p>Chegou a hora de ver tudo funcionando junto.</p>
                <ol>
                    <li>Garanta que sua API Spring Boot esteja rodando.</li>
                    <li>Abra um terminal na pasta do projeto Angular (<code>todolist-web</code>) e execute:</li>
                </ol>
                <pre><code>ng serve --open</code></pre>
                <p>Seu navegador abrirá em <code>http://localhost:4200</code> e você poderá interagir com sua aplicação de lista de tarefas!</p>
            </section>

            <div class="troubleshooting">
                <h3>🎯 Troubleshooting: Erros de Compilação</h3>
                <p><strong>Erro Comum:</strong> <code>Property 'addTarefa' does not exist on type 'TarefaService'.</code></p>
                <p><strong>Causa:</strong> Este erro geralmente ocorre quando o componente (<code>TaskListComponent</code>) tenta chamar um método que não foi definido ou foi escrito incorretamente no serviço (<code>TarefaService</code>).</p>
                <p><strong>Solução:</strong> Verifique o arquivo <code>src/app/services/tarefa.service.ts</code> e garanta que ele contenha o código completo e correto para todos os métodos CRUD. Qualquer erro de digitação ou método ausente causará essa falha na compilação.</p>
            </div>
        </main>
    </div>

</body>
</html>